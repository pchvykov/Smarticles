<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="2,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">%return coordinates of 4 points from smarticle position 5-tuple</span></span></span>
<span class="srcline"><span class="lineno"><a href="2,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%in: [cx,cy, theta, al1, al2] - c.o.m coord, body orientation, arm angles (left, right)</span></span></span>
<span class="srcline"><span class="lineno"><a href="2,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%out: [x1,y1, x2,y2, x3,y3, x4,y4]</span></span></span>
<span class="srcline"><span class="lineno"><a href="2,4" id="srcline4"> 4</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T6U3">crd</span>] = smcle2coord(<span class="var type1" id="S3T2U6">sm</span>) <span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="2,5" id="srcline5"> 5</a></span><span class="line"><span class="keyword">global</span> <span class="var type0" id="S4T0U8">A</span> <span class="var type0" id="S5T0U9">B</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="2,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T5:U3"><span class="var type1" id="S6T5U12">delB</span>=<span class="mxinfo " id="T5:U5"><span class="mxinfo " id="T15:U6"><span class="var type1" id="S5T15U15">B</span>/<span class="mxinfo " id="T15:U8">2</span></span>*<span class="mxinfo " id="T5:U9">[<span class="mxinfo " id="T22:U10">sin(<span class="mxinfo " id="T22:U11"><span class="var type1" id="S3T2U22">sm</span>(<span class="mxinfo " id="T21:U13">:</span>,<span class="mxinfo " id="T12:U14">3</span>)</span>)</span>, <span class="mxinfo " id="T22:U15">-<span class="mxinfo " id="T22:U16">cos(<span class="mxinfo " id="T22:U17"><span class="var type1" id="S3T2U29">sm</span>(<span class="mxinfo " id="T21:U19">:</span>,<span class="mxinfo " id="T12:U20">3</span>)</span>)</span></span>]</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="2,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T6:U21"><span class="var type1" id="S2T6U34">crd</span>=<span class="mxinfo " id="T6:U23">zeros(<span class="mxinfo " id="T15:U24">length(<span class="var type1" id="S3T2U40">sm</span>(:,1))</span>,<span class="mxinfo " id="T15:U26">8</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="2,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo " id="T5:U27"><span class="mxinfo " id="T5:U28"><span class="var type1" id="S2T6U47">crd</span>(<span class="mxinfo " id="T21:U30">:</span>,<span class="mxinfo " id="T4:U31"><span class="mxinfo " id="T15:U32">3</span>:<span class="mxinfo " id="T15:U33">4</span></span>)</span>=<span class="mxinfo " id="T5:U34"><span class="mxinfo " id="T5:U35"><span class="var type1" id="S3T2U54">sm</span>(<span class="mxinfo " id="T21:U37">:</span>,<span class="mxinfo " id="T4:U38"><span class="mxinfo " id="T15:U39">1</span>:<span class="mxinfo " id="T15:U40">2</span></span>)</span>-<span class="var type1" id="S6T5U59">delB</span></span></span>; <span class="mxinfo " id="T5:U42"><span class="mxinfo " id="T5:U43"><span class="var type1" id="S2T6U63">crd</span>(<span class="mxinfo " id="T21:U45">:</span>,<span class="mxinfo " id="T4:U46"><span class="mxinfo " id="T15:U47">5</span>:<span class="mxinfo " id="T15:U48">6</span></span>)</span>=<span class="mxinfo " id="T5:U49"><span class="mxinfo " id="T5:U50"><span class="var type1" id="S3T2U70">sm</span>(<span class="mxinfo " id="T21:U52">:</span>,<span class="mxinfo " id="T4:U53"><span class="mxinfo " id="T15:U54">1</span>:<span class="mxinfo " id="T15:U55">2</span></span>)</span>+<span class="var type1" id="S6T5U75">delB</span></span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="2,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T5:U57"><span class="mxinfo " id="T5:U58"><span class="var type1" id="S2T6U79">crd</span>(<span class="mxinfo " id="T21:U60">:</span>,<span class="mxinfo " id="T4:U61"><span class="mxinfo " id="T15:U62">1</span>:<span class="mxinfo " id="T15:U63">2</span></span>)</span>=<span class="mxinfo " id="T5:U64"><span class="mxinfo " id="T5:U65"><span class="var type1" id="S2T6U86">crd</span>(<span class="mxinfo " id="T21:U67">:</span>,<span class="mxinfo " id="T4:U68"><span class="mxinfo " id="T15:U69">3</span>:<span class="mxinfo " id="T15:U70">4</span></span>)</span>+ <span class="mxinfo " id="T5:U71"><span class="var type1" id="S4T15U92">A</span>*<span class="mxinfo " id="T5:U73">[<span class="mxinfo " id="T22:U74">-<span class="mxinfo " id="T22:U75">sin(<span class="mxinfo " id="T22:U76"><span class="mxinfo " id="T22:U77"><span class="var type1" id="S3T2U100">sm</span>(<span class="mxinfo " id="T21:U79">:</span>,<span class="mxinfo " id="T12:U80">3</span>)</span>-<span class="mxinfo " id="T22:U81"><span class="var type1" id="S3T2U104">sm</span>(<span class="mxinfo " id="T21:U83">:</span>,<span class="mxinfo " id="T15:U84">4</span>)</span></span>)</span></span>, <span class="mxinfo " id="T22:U85">cos(<span class="mxinfo " id="T22:U86"><span class="mxinfo " id="T22:U87"><span class="var type1" id="S3T2U111">sm</span>(<span class="mxinfo " id="T21:U89">:</span>,<span class="mxinfo " id="T12:U90">3</span>)</span>-<span class="mxinfo " id="T22:U91"><span class="var type1" id="S3T2U115">sm</span>(<span class="mxinfo " id="T21:U93">:</span>,<span class="mxinfo " id="T15:U94">4</span>)</span></span>)</span>]</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="2,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo " id="T5:U95"><span class="mxinfo " id="T5:U96"><span class="var type1" id="S2T6U121">crd</span>(<span class="mxinfo " id="T21:U98">:</span>,<span class="mxinfo " id="T4:U99"><span class="mxinfo " id="T15:U100">7</span>:<span class="mxinfo " id="T15:U101">8</span></span>)</span>=<span class="mxinfo " id="T5:U102"><span class="mxinfo " id="T5:U103"><span class="var type1" id="S2T6U128">crd</span>(<span class="mxinfo " id="T21:U105">:</span>,<span class="mxinfo " id="T4:U106"><span class="mxinfo " id="T15:U107">5</span>:<span class="mxinfo " id="T15:U108">6</span></span>)</span>- <span class="mxinfo " id="T5:U109"><span class="var type1" id="S4T15U134">A</span>*<span class="mxinfo " id="T5:U111">[<span class="mxinfo " id="T22:U112">-<span class="mxinfo " id="T22:U113">sin(<span class="mxinfo " id="T22:U114"><span class="mxinfo " id="T22:U115"><span class="var type1" id="S3T2U142">sm</span>(<span class="mxinfo " id="T21:U117">:</span>,<span class="mxinfo " id="T12:U118">3</span>)</span>+<span class="mxinfo " id="T22:U119"><span class="var type1" id="S3T2U146">sm</span>(<span class="mxinfo " id="T21:U121">:</span>,<span class="mxinfo " id="T15:U122">5</span>)</span></span>)</span></span>, <span class="mxinfo " id="T22:U123">cos(<span class="mxinfo " id="T22:U124"><span class="mxinfo " id="T22:U125"><span class="var type1" id="S3T2U153">sm</span>(<span class="mxinfo " id="T21:U127">:</span>,<span class="mxinfo " id="T12:U128">3</span>)</span>+<span class="mxinfo " id="T22:U129"><span class="var type1" id="S3T2U157">sm</span>(<span class="mxinfo " id="T21:U131">:</span>,<span class="mxinfo " id="T15:U132">5</span>)</span></span>)</span>]</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="2,11" id="srcline11">11</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
</body>
</html>
